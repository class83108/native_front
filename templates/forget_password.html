<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>忘記密碼</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
     <script src="../static/js/jquery.min.js" type="text/javascript"></script>
	<!--  我自己的css-->
  <link rel="stylesheet" href="../static/css/style.css">
<!--  google字型-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500&display=swap" rel="stylesheet">
  <!--icon-->
  <script src="https://kit.fontawesome.com/17c8650b26.js" crossorigin="anonymous"></script>
  <!--  url-->
  <script src="../static/js/urls.js"></script>
</head>
<body>
<!--header-->
  <header>
    <div class='container-fluid clear-padding-row'>
<!--      <div class="row">-->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
<!--    <div class="">-->
    <a class="navbar-brand" href="#"><i class="fa-solid fa-feather-pointed"></i>台灣土種雞網</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
<!--    </div>-->
<!--    <div class="">-->
       <div class="collapse navbar-collapse" id="navbarSupportedContent">

      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">

        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/native/templates/index.html">
            <i class="fa-solid fa-house-user"></i>回到首頁</a>
        </li>

<!--      最新消息    -->
          <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color:white">
            <i class="fa-solid fa-newspaper"></i>最新消息
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/native/templates/aiinfo.html?1">禽流感疫情資訊</a></li>
            <li><a class="dropdown-item" href="/native/templates/feedprice.html?1">進口原物料價格</a></li>
            <li><a class="dropdown-item" href="/native/templates/eggmeatprice.html?1">家禽產地交易行情</a></li>
          </ul>
            </li>
<!--雞種介紹-->

          <li class="nav-item dropdown">
          <span></span>
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color:white">
            <i class="fa-solid fa-egg"></i>雞種介紹
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/native/templates/breed_chicken.html">育種品系介紹</a></li>
            <li><a class="dropdown-item" href="/native/templates/conservation_chicken.html">保種品系介紹</a></li>
          </ul>
            </li>
<!--      研究成果    -->
          <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color:white">
            <i class="fa-solid fa-book"></i>研究成果
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/native/templates/article_Taiwan.html?1">台灣土雞論文</a></li>
            <li><a class="dropdown-item" href="/native/templates/article_zaki.html?1">石岐雞論文</a></li>
            <li><a class="dropdown-item" href="/native/templates/article_huadong.html?1">花東雞論文</a></li>
            <li><a class="dropdown-item" href="/native/templates/article_kinmen.html?1">金門雞論文</a></li>
            <li><a class="dropdown-item" href="/native/templates/article_silkie.html?1">絲羽烏骨雞論文</a></li>
            <li><a class="dropdown-item" href="/native/templates/article_emei.html?1">峨嵋雞論文</a></li>
            <li><a class="dropdown-item" href="/native/templates/article_takezaki.html?1">竹崎雞論文</a></li>
            <li><a class="dropdown-item" href="/native/templates/article_faith.html?1">信義雞論文</a></li>
            <li><a class="dropdown-item" href="/native/templates/article_nagoya.html?1">名古屋雞論文</a></li>
          </ul>
            </li>
<!--          會員中心-->
          <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color:white">
            <i class="fa-solid fa-circle-user"></i>會員中心
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/native/templates/about.html">關於我</a></li>
            <li><a class="dropdown-item" href="/native/templates/change_info.html">更改會員資料</a></li>
            <li><a class="dropdown-item" href="/native/templates/forget_password.html">忘記密碼</a></li>
            <li><a class="dropdown-item" href="https://nativechicken-chatroom.herokuapp.com/chat/index/" target="_blank">台灣土種雞交流區</a></li>
          </ul>
            </li>
<!--          聯絡我們-->
          <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/native/templates/contact_us.html"><i class="fa-solid fa-square-phone-flip"></i>
            聯絡我們</a>
        </li>

<!--登入/註冊-->

          <li class="nav-item dropdown navbar-right">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color:white">
           <i class="fa-solid fa-right-to-bracket"></i>登入/註冊
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/native/templates/login.html">登入</a></li>
            <li><a class="dropdown-item" href="/native/templates/register.html">註冊</a></li>
            <div id="logout" style="display:none" ><li><a class="dropdown-item" href="#">登出</a></li></div>
              <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item github_login" href="#">GitHub登入</a></li>
          </ul>
            </li>

      </ul>
    </div>
<!--      </div>-->
  </div>
  </nav>
<!--  </div>-->

    </div>
 </header>
   <section class="vh-100" style="background-image:url('../static/images/pexels-alison-burrell-195226_2.jpg');background-position:0 -300px">
  <div class="container h-100">
    <div class="row d-flex justify-content-center h-100">
      <div class="col-lg-12 col-xl-11" style="margin-top:50px">
        <div class="card text-black" style="border-radius: 25px">
          <div class="card-body p-md-5">
 <div class="row justify-content-center align-items-center">
	<div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">
		<h1 style="margin-bottom:50px">忘記密碼</h1>


          <table class="table">

                <tr><th scope="row">帳號</th>

				<td><input type="text" id='username' class="username"    placeholder="帳號" required/></td>
                </tr>
            <tr><th scope="row">信箱</th>
              <td><input type="text" id='email' class="email"  placeholder="信箱" required/></td></tr>
          </table>
				<input style="margin-bottom:20px" type="button" value="提交" onclick="fpassword()">

	</div>
   <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">
        <img src="../static/images/pexels-brett-jordan-840111.jpg" class="img-fluid" alt="Sample image" style="border-radius: 25px;">
    </div>
             </div>
      </div>
    </div></div>
  </div></div>
</section>
<footer>
    <div class="container clear-padding-row">
        <div class="row align-items-center">
            <div class="col">
                <p>Copyright © 2022 國立中興大學動物科學系設計製作</p>
            </div>
        </div>
    </div>
</footer>
</body>
<script>
function fpassword(){
        var username = $('#username').val();
        var email = $('#email').val();
        var post_data = {"username":username, "email":email};
        $.ajax({
        type:"put",
        contentType:"application/json",
        dataType:"json",
        url:`http://${HOST}:${PORT}/v1/users/${username}/forget_password`,
        data:JSON.stringify(post_data),
        success:function (result) {
            if (result.code == 200){
                alert('新密碼已寄出，如需更改密碼請至更改資料頁面進行更改');
                window.location.href = '/native/templates/login.html'
            }else{
                alert(result.error)
            }
        }
    });

    }

    var token = window.localStorage.getItem('token');
    var username = window.localStorage.getItem('user');
    if (token){
        logout = document.getElementById("logout")
        logout.style.display="block"
    }
    $('#logout').click(function(){

            if(confirm("確定登出嗎？")){
                window.localStorage.removeItem('token');
                window.localStorage.removeItem('user');
                window.location.href= '/native/templates/index.html';
            }
        })
$('.github_login').click(function(){
    $.ajax({
    type:'get',
    url:`http://${HOST}:${PORT}/v1/users/github/authorization`,
    success:function(response){
    if(200==response.code){
        console.log(response)
        console.log('go to github')
        window.location.href=response.oauth_url
    }else{
    alert('服務器異常')
                   }
                }
    })
    })
  </script>
</html>